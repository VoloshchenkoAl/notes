---
title: –û–± º—î–∫—Ç Proxy –≤ JavaScript
date: 2023-01-27
description: –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ –∑–±—ñ—Ä–∫–∞ –ø—Ä–æ –æ–± º—î–∫—Ç Proxy –≤ JavaScript —Ç–∞ –ø—Ä–∏–∫–ª–∞–¥–∏ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
tags:
  - javascript
---

–¶–µ —Ä–æ–∑–ø–æ–≤—ñ–¥—å –ø—Ä–æ –æ–± º—î–∫—Ç `Proxy`, —è–∫–∏–π –∑ º—è–≤–∏–≤—Å—è –≤ [ES6](https://262.ecma-international.org/6.0/#sec-proxy-object-internal-methods-and-internal-slots).

–ê —Ä–æ–∑–ø–æ–≤—ñ–¥—å –ø–æ—á–Ω–µ–º–æ –Ω–µ –∑ —Ç–µ–æ—Ä—ñ—ó, –∞ –ø—Ä–∏–∫–ª–∞–¥—É

## –î—ñ—Å—Ç–∞–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º–∞—Å–∏–≤—É –∑–∞–≤–¥—è–∫–∏ –≤—ñ–¥ º—î–º–Ω–∏–º —ñ–Ω–¥–µ–∫—Å–∞–º

–í `python` —î –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –¥—ñ—Å—Ç–∞–≤–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –º–∞—Å–∏–≤—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –≤—ñ–¥ º—î–º–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏:

```python
letters = ["a", "b", "c"]

print(letters[-1]) # => 'c'
print(letters[-2]) # => 'b'
```

–ë—É–ª–æ –± –¥–æ–±—Ä–µ, —Ç–∞–∫–∏–π —Å–ø–æ—Å—ñ–± –¥—ñ—Å—Ç–∞–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º–∞—Å–∏–≤—É –¥–æ–¥–∞—Ç–∏ –¥–æ JS ü§î
(–≤–≤–∞–∂–∞–π–º–æ —Ü–µ–π —Å–ø–æ—Å—ñ–± –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ—é –¥–æ –Ω–∞—è–≤–Ω–æ–≥–æ –º–µ—Ç–æ–¥—É [at](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/at) –º–∞—Å–∏–≤—ñ–≤ –≤ JS)

–û—Å–∫—ñ–ª—å–∫–∏ —Ü–µ —Ä–æ–∑–ø–æ–≤—ñ–¥—å –ø—Ä–æ `Proxy`, —Ç–æ –∑—Ä–æ–∑—É–º—ñ–ª–æ, —â–æ —Ü—é –∑–∞–¥–∞—á—É –º–æ–∂–Ω–∞ —Ä–æ–∑–≤ º—è–∑–∞—Ç–∏ –∑–∞–≤–¥—è–∫–∏ `Proxy`:

```js
function createArray(...items) {
  const handler = {
    get(target, property, receiver) {
      let index = parseInt(property, 10);

      if (index < 0) {
        index = target.length + index;
      }

      return target[index];
    },
  };

  return new Proxy(items, handler);
}

const numbers = createArray(1, 2, 3, 4, 5, 6);

console.log(numbers[-1]); // => 6
```

–©–æ–± –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —è–∫ –ø—Ä–∞—Ü—é—î –ø—Ä–∏–∫–ª–∞–¥ –≤–∏—â–µ, –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ç—Ä–æ—Ö–∏ –∑–∞–≥–ª–∏–±–∏—Ç–∏—Å—å –≤ —Ç–µ–æ—Ä—ñ—é

## –¢–µ–æ—Ä—ñ—è

### –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–∞—Ç–∏ –ø—Ä–æ Proxy?

–î–æ–¥–∞—é—á–∏ **Proxy** –¥–æ –æ–± º—î–∫—Ç—É, –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ –¥–æ–¥–∞—Ç–∫–æ–≤—É –æ–±–≥–æ—Ä—Ç–∫—É. –ú–∞—é—á–∏ —Ç–∞–∫—É –æ–±–≥–æ—Ä—Ç–∫—É, –º–∏ –º–æ–∂–µ–º–æ –ø–µ—Ä–µ—Ö–æ–ø–ª—é–≤–∞—Ç–∏ —Ç–∞ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—Ç–∏ –±–∞–∑–æ–≤—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –æ–± º—î–∫—Ç–∞–º–∏

–ù–∞ –¥—ñ–∞–≥—Ä–∞–º—ñ –Ω–∏–∂—á–µ –ø—Ä–æ—ñ–ª—é—Å—Ç—Ä–æ–≤–∞–Ω–∏–π –ø—Ä–∏–Ω—Ü–∏–ø —Ç–æ–≥–æ, —è–∫ –ø—Ä–∞—Ü—é—î –ø—Ä–æ–∫—Å—ñ –¥–ª—è –æ–± º—î–∫—Ç—É `Person`. –í —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –≤ `PROXY` –±—É–ª–æ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–æ –º–µ—Ç–æ–¥ `get`. –¢–æ–º—É –∑–≤–µ—Ä—Ç–∞—é—á–∏—Å—å –¥–æ –ø–æ–ª—è `Peson.name` –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è —Å–ø–æ—á–∞—Ç–∫—É –π–¥–µ –¥–æ `PROXY`, –∞ –∑–≤—ñ–¥—Ç–∏, –≤–∂–µ –¥–æ –æ–± º—î–∫—Ç—É `Person`

```bash
                      PROXY                    Person
                +---------------+         +---------------+
                |               |         |               |
                |               |         |     name      |
  Person.name   |    +-----+    |         |    +-----+    |
----------------|--->|     |----|---------|--->|     |    |
                |    | get |    |         |    | Lil |    |
-------<--------|----|     |<---|---------|----|     |    |
      Lil       |    +-----+    |         |    +-----+    |
                |               |         |               |
                |               |         |               |
                +---------------+         +---------------+
```

–†–æ–∑–≥–ª—è–Ω–µ–º–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ, —è–∫ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ—Ö–æ–ø–∏—Ç–∏ —Ç–∞ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∏—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –º–µ—Ç–æ–¥ `[[Get]]` –æ–± º—î–∫—Ç—É

#### –õ–æ–≥—É–≤–∞–Ω–Ω—è –∑–≤–µ—Ä–Ω–µ–Ω—å –¥–æ –ø–æ–ª—ñ–≤ –æ–± º—î–∫—Ç—É

–í –∫–æ–¥—ñ –Ω–∏–∂—á–µ –æ–≥–æ–ª–æ—à—É—î—Ç—å—Å—è —Ñ—É–Ω–∫—Ü—ñ—è `traceProperty`, —è–∫–∞ –ø–µ—Ä—à–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –ø—Ä–∏–π–º–∞—î –æ–± º—î–∫—Ç, –∞ —ñ–Ω—à—ñ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ —è–≤–ª—è—é—Ç—å —Å–æ–±–æ—é –Ω–∞–∑–≤–∏ –ø–æ–ª—ñ–≤, –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ —è–∫–∏—Ö –º–∏ —Ö–æ—á–µ–º–æ –ª–æ–≥—É–≤–∞—Ç–∏. –ù–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–∞ —á–∞—Å—Ç–∏–Ω–∞, —Ü–µ –º–µ—Ç–æ–¥ `handler.get` –≤ —Å–µ—Ä–µ–¥–∏–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó `traceProperty`. –°–∞–º–µ –º–µ—Ç–æ–¥ `handler.get` –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î —ñ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—î, —è–∫ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –ø–æ–ª—ñ–≤ –æ–± º—î–∫—Ç—É `traceMagic`

```js
const magic = {
  number: 42,
  isMagic: false,
  toString() {
    console.log(
      `Your number is ${this.number}. Am I right? Answer: ${this.isMagic}`
    );
  },
};

const traceMagic = traceProperty(magic, 'isMagic', 'number');

const guestNumber = traceMagic.number; // Get property magicNumber
traceMagic.toString(); // Get property magicNumber, Get property isMagic

function traceProperty(obj, ...keys) {
  const handler = {
    get(target, propKey) {
      if (keys.includes(propKey)) {
        console.log(`Get property ${propKey}`);
      }

      return target[propKey];
    },
  };

  return new Proxy(obj, handler);
}
```

### –Ø–∫ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ Proxy?

–í–∏—â–µ –±—É–ª–æ —Ä–æ–∑–≥–ª—è–Ω—É—Ç–æ –¥–≤–∞ –ø—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –æ–± º—î–∫—Ç—É `Proxy`. –¢–µ–ø–µ—Ä –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ —Å—Ñ–æ–∫—É—Å—É—î–º–æ—Å—å, —è–∫ —Å–∞–º–µ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è `Proxy` —Ç–∞ —è–∫—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—Ä–∏–π–º–∞—î —Ü–µ–π –æ–± º—î–∫—Ç.

Proxy —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–º —à–∞–±–ª–æ–Ω–æ–º:

```js
const target = { msg: 'hello' };
const handler = {};

const proxy = new Proxy(target, handler);
```

```bash
                    +--------+  +---------+
                    | target |  | handler |
                    +--------+  +---------+
                          |        |
   +----------------------+        +-----------------------+
   |                                                       |
   |                                                       |
+--------------------------------+      +--------------------------------+
| –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –æ–± º—î–∫—Ç            |      |  –û–± º—î–∫—Ç, –≤ —è–∫–æ–º—É –≤–∫–∞–∑—É—î–º–æ —è–∫—ñ  |
|   –¥–æ —è–∫–æ–≥–æ —Ö–æ—á–µ–º–æ –¥–æ–¥–∞—Ç–∏ Proxy |      |     –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –º–µ—Ç–æ–¥–∏ –±—É–¥–µ–º–æ    |
+--------------------------------+      | –ø–µ—Ä–µ—Ö–æ–ø–ª—é–≤–∞—Ç–∏ —Ç–∞ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—Ç–∏ |
                                        +--------------------------------+
```

### –©–æ —Ç–∞–∫–µ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –º–µ—Ç–æ–¥–∏ –æ–± º—î–∫—Ç—É?

–í –∫–æ–∂–Ω–æ–≥–æ –æ–± º—î–∫—Ç–∞ —î –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –º–µ—Ç–æ–¥–∏, —è–∫—ñ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å, —è–∫ –±—É–¥–µ –≤—ñ–¥–±—É–≤–∞—Ç–∏—Å—è –≤–∑–∞—î–º–æ–¥—ñ—è –∑ –æ–± º—î–∫—Ç–æ–º.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–ª–∏ –¥—ñ—Å—Ç–∞—î–º–æ—Å—è –¥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—è `obj.x` –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –æ–¥–∏–Ω –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤:

1. –®—É–∫–∞—î–º–æ –ø–æ–ª–µ `x` –≤ –ª–∞–Ω—Ü—é–∂–∫—É –ø—Ä–æ—Ç–æ—Ç–∏–ø—ñ–≤ (prototype chain), –¥–æ–ø–æ–∫–∏ –ø–æ–ª–µ –Ω–µ –±—É–¥–µ –∑–Ω–∞–π–¥–µ–Ω–µ
2. –Ø–∫—â–æ `x` –¥–æ–¥–∞–Ω–æ —á–µ—Ä–µ–∑ `Object.defineProperty()`, —Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∞—Ç—Ä–∏–±—É—Ç–∞ `value`
3. –ü–æ–ª–µ `x` –º–æ–∂–µ –±—É—Ç–∏ –≥–µ—Ç—Ç–µ—Ä–æ–º ‚Äî> `get x() {}`. –í —Ç–∞–∫–æ–º—É –≤–∏–ø–∞–¥–∫—É –≤–∏–∫–æ–Ω—É—î–º–æ –≥–µ—Ç–µ—Ä —ñ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è

–¢–æ–º—É —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `obj.x` –≤–∏–∫–æ–Ω—É—î –º–µ—Ç–æ–¥ `[[GET]]`, –∞ –æ–± º—î–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –π–æ–≥–æ –≤–ª–∞—Å–Ω—É –≤–Ω—É—Ç—Ä—ñ—à–Ω—é —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —Ü—å–æ–≥–æ –º–µ—Ç–æ–¥—É, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏ —è–∫–µ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–≤–µ—Ä–Ω—É—Ç–∏. (—Ü—è —á–∞—Å—Ç–∏–Ω–∞ —Ç–µ–∫—Å—Ç—É –≤–∑—è—Ç–∞ –∑ [mdn](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy#object_internal_methods))

–Ø–∫—ñ —â–µ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –º–µ—Ç–æ–¥–∏?

–¶–µ –º–æ–∂–µ –±—É—Ç–∏ —Å–µ—Ç–µ—Ä ‚òòÔ∏èüê∂ `obj.y = 2`. –ê–±–æ –∂ has üèéÔ∏è `propKey in obj`

### Trap

–ö–æ–ª–∏ –º–æ–≤–∞ –π–¥–µ –ø—Ä–æ `Proxy`, —Ç–æ —á–∞—Å—Ç–æ –∑–≥–∞–¥—É—î—Ç—å—Å—è —Ç–µ—Ä–º—ñ–Ω `trap` (–ø–∞—Å—Ç–∫–∞). **Trap** ‚Äî —Ü–µ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –≤–∏–∑–Ω–∞—á–∞—î —è–∫ –±—É–¥–µ –ø–æ–≤–æ–¥–∏—Ç–∏ —Å–µ–±–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –º–µ—Ç–æ–¥ –æ–± º—î–∫—Ç—É, –∫–æ–ª–∏ –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ –ø—Ä–æ–∫—Å—ñ

–ú–∏ —ó—Ö –≤–∂–µ –∑—É—Å—Ç—Ä—ñ—á–∞–ª–∏ —Ä–∞–Ω—ñ—à–µ:

```js
const target = { msg: 'hello' };
const handler = {
    get() {} // <---- —Ü–µ trap
    has() {} // <---- —ñ —Ü–µ trap
};

const proxy = new Proxy(target, handler);
```

–ù–∞ [mdn —î —Ç–∞–±–ª–∏—á–∫–∞](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy#object_internal_methods), –¥–µ –∑–æ–±—Ä–∞–∂–µ–Ω—ñ –≤—Å—ñ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –º–µ—Ç–æ–¥–∏ –æ–± º—î–∫—Ç–∞ —Ç–∞ —ó—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –ø–∞—Å—Ç–∫–∏

### Reflect

`Reflect` ‚Äî —Ü–µ –æ—Å—Ç–∞–Ω–Ω—è —á–∞—Å—Ç–∏–Ω–∞ —Ç–µ–æ—Ä—ñ—ó, –ø—Ä–æ —è–∫—É –≤–∞—Ä—Ç–æ –∑–≥–∞–¥–∞—Ç–∏, –ø–µ—Ä–µ–¥ —Ç–∏–º, —è–∫ —Ä—É—Ö–∞—Ç–∏—Å—è –¥–æ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤.

–ó–≥–∞–¥–∞–π–º–æ —Ñ—É–Ω–∫—Ü—ñ—é, –¥–ª—è –ª–æ–≥—É–≤–∞—Ç–∏ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –ø–æ–ª—ñ–≤ –æ–± º—î–∫—Ç—É, –ø—Ä–æ —è–∫—É –≥–æ–≤–æ—Ä–∏–ª–∏ —Ä–∞–Ω—ñ—à–µ:

```js
function traceProperty(obj, ...keys) {
  const handler = {
    get(target, propKey) {
      if (keys.includes(propKey)) {
        console.log(`Get property ${propKey}`);
      }

      return target[propKey];
    },
  };

  return new Proxy(obj, handler);
}
```

–í –ø–∞—Å—Ç—Ü—ñ `get` –º–∏ —Å–ø–æ—á–∞—Ç–∫—É –ª–æ–≥—É—î–º–æ –Ω–∞–∑–≤—É –ø–æ–ª—è, –¥–æ —è–∫–æ–≥–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è, –∞ –ø—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤–ª–∞—Å–Ω–æ—Ä—É—á –≤–∏–∫–æ–Ω—É—î–º–æ –¥—ñ—Å—Ç–∞–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—É –∑ –æ–± º—î–∫—Ç—É `target[propKey]`. –î–æ `ES6` —Ä–∞–∑–æ–º –∑ `Proxy` –±—É–ª–æ –¥–æ–¥–∞–Ω–æ –æ–± º—î–∫—Ç `Reflect`, —è–∫–∏–π –≤–∫–ª—é—á–∞—î –º–µ—Ç–æ–¥–∏, —â–æ –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ—Ö –º–µ—Ç–æ–¥—ñ–≤ –æ–± º—î–∫—Ç—É. –ó–≤—É—á–∏—Ç—å —Å–∫–ª–∞–¥–Ω–æ, –ø—Ä–æ—Ç–µ –Ω–∞ –ø—Ä–∞–∫—Ç–∏—Ü—ñ –ø—Ä–æ—Å—Ç—ñ—à–µ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–¥ –≤–∏—â–µ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º `Reflect` –±—É–¥–µ –º–∞—Ç–∏ –≤–∏–≥–ª—è–¥:

```js
function traceProperty(obj, ...keys) {
  const handler = {
    get(target, propKey, receiver) {
      if (keys.includes(propKey)) {
        console.log(`Get property ${propKey}`);
      }

      return Reflect.get(target, propKey, receiver); // –∞–±–æ Reflect.get(...arguments);
    },
  };

  return new Proxy(obj, handler);
}
```

–Ü–Ω—à–∏–π –ø—Ä–∏–∫–ª–∞–¥ ([–¥–∂–µ—Ä–µ–ª–æ](https://exploringjs.com/deep-js/ch_proxies.html#improvement-using-reflect.)):

```js
const handler = {
  deleteProperty(target, propKey) {
    return Reflect.deleteProperty(target, propKey); // —â–æ–± –Ω–µ –ø–∏—Å–∞—Ç–∏ delete target[propKey];
  },
  has(target, propKey) {
    return Reflect.has(target, propKey); // —â–æ–± –Ω–µ –ø–∏—Å–∞—Ç–∏ propKey in target;
  },
};
```

–î–ª—è –∫–æ–∂–Ω–æ—ó –ø–∞—Å—Ç–∫–∏: `handler.trap(target, arg_1, ¬∑¬∑¬∑, arg_n)`

`Reflect` –º–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –º–µ—Ç–æ–¥: `Reflect.trap(target, arg_1, ¬∑¬∑¬∑, arg_n)`

### –ü—ñ–¥—Å—É–º—É—î–º–æ —Ç–µ–æ—Ä—ñ—é

1. `Proxy` –¥–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ—Ö–æ–ø–ª—é–≤–∞—Ç–∏ —Ç–∞ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ—Ö –º–µ—Ç–æ–¥—ñ–≤ –æ–± º—î–∫—Ç–∞, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ —Ç–∞–∫–∏—Ö —è–∫ `get` –∞–±–æ `set`.

2. –ü—Ä–∏–∫–ª–∞–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è `Proxy`:

```js
const target = { msg: 'hello' };
const handler = {
    ownKeys() {} // <---- —Ü–µ trap
    has() {} // <---- —ñ —Ü–µ trap
};

const proxy = new Proxy(target, handler);
```

3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `Reflect.[trap]` –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É (the reflective semantics for invoking) –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ –º–µ—Ç–æ–¥–∞ –æ–± º—î–∫—Ç–∞.

   –ù–∞–ø—Ä–∏–∫–ª–∞–¥ `'propName' in obj` ‚Äî> `Reflect.has(obj, 'propName')` –∞–±–æ `obj.propName` ‚Äî> `Reflect.get(obj, 'propName')`

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –•–æ–≤–∞–Ω–Ω—è "–ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö" –ø–æ–ª—ñ–≤

–í JavaScript –∑ º—è–≤–∏–ª–∞—Å—å –Ω–æ–≤–∞ —Ñ—ñ—á–∞ ‚Äî [–ø—Ä–∏–≤–∞—Ç–Ω—ñ –ø–æ–ª—è](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Private_class_fields). –î–æ –ø–æ—è–≤–∏ —Ü—ñ—î—ó —Ñ—ñ—á—ñ, —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∏ –º–æ–≥–ª–∏ –¥–æ–º–æ–≤–ª—è—Ç–∏—Å—è –º—ñ–∂ —Å–æ–±–æ—é, —â–æ —É–º–æ–≤–Ω–æ, –≤ –æ–± º—î–∫—Ç—ñ –ø—Ä–∏–≤–∞—Ç–Ω–∏–º–∏ –ø–æ–ª—è–º–∏ –±—É–¥—É—Ç—å —Ç—ñ, —è–∫—ñ –ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è –∑ –Ω–∏–∂–Ω—å–æ–≥–æ –ø—ñ–¥–∫—Ä–µ—Å–ª–µ–Ω–Ω—è, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `_name`.

```js
const person = {
  age: 42,
  name: 'Philip',
  _allergy: 'fish', // –ø—Ä–∏–≤–∞—Ç–Ω–µ –ø–æ–ª–µ –∑–∞ –Ω–∞—à–∏–º–∏ –¥–æ–º–æ–≤–ª–µ–Ω–æ—Å—Ç—è–º–∏
};
```

–ó —É—Å—ñ–º —Ç–∏–º, —Ü–µ –±—É–ª–∏ "—É–º–æ–≤–Ω–æ" –ø—Ä–∏–≤–∞—Ç–Ω—ñ –ø–æ–ª—è, —Ç–æ–º—É —ó—Ö –∑–Ω–∞—á–µ–Ω–Ω—è –º–æ–∂–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ ‚Äî `peson._allergy = ''`.

–ó–∞–≤–¥—è–∫–∏ `Proxy`, —ó—Ö –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ –ø–æ-—Å–ø—Ä–∞–≤–∂–Ω—å–æ–º—É –ø—Ä–∏–≤–∞—Ç–Ω–∏–º–∏:

```js
const data = {
  age: 42,
  name: 'Philip',
  _allergy: 'fish',
};

const person = new Proxy(data, {
  get(target, propertyKey, receiver) {
    if (propertyKey.startsWith('_')) {
      throw new SyntaxError('Could not get private member.');
    }

    return Reflect.get(target, propertyKey, receiver);
  },
  set(target, propertyKey, value, receiver) {
    if (propertyKey.startsWith('_')) {
      throw new SyntaxError('Could not set value for private member.');
    }

    return Reflect.set(target, propertyKey, value, receiver);
  },
  ownKeys(target) {
    return Reflect.ownKeys(target).filter(function (name) {
      return !name.startsWith('_');
    });
  },
});

console.log(Object.keys(person)); // ["age", "name"]
console.log(person._allergy); // "SyntaxError: Could not get private member.
person._allergy = ''; // "SyntaxError: Could not set value for private member.
```

–û—Å–∫—ñ–ª—å–∫–∏ "—É–º–æ–≤–Ω–æ" –ø—Ä–∏–≤–∞—Ç–Ω—ñ –ø–æ–ª—è –ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è –∑ —Å–∏–º–≤–æ–ª–∞ `_`, —Ç–æ —É –∫–æ–∂–Ω—ñ–π –ø–∞—Å—Ç—Ü—ñ –º–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –Ω–∞–∑–≤–∞ –ø–æ–ª—è –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ —Ü—å–æ–≥–æ —Å–∏–º–≤–æ–ª—É. –Ø–∫—â–æ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è, —Ç–æ –ø–∞—Å—Ç–∫–∞ –∫–∏–¥–∞—î –ø–æ–º–∏–ª–∫—É

### –ù–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π –æ–± º—î–∫—Ç

–ú–æ–∂–ª–∏–≤–æ –≤–∏ –æ–ø–∏–Ω—è–ª–∏—Å—å –≤ –ø–æ–¥—ñ–±–Ω—ñ–π —Å–∏—Ç—É–∞—Ü—ñ—ó. –°–ø–æ–∫—ñ–π–Ω–æ –ø—Ä–∞—Ü—é—î—Ç–µ –∑ –æ–± º—î–∫—Ç–æ–º `data`, –∞ –ø–æ—Ç—ñ–º —Ä–∞–ø—Ç–æ–º —Ö–æ—á–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–µ –ø–æ–ª–µ –∑ –ø–µ–≤–Ω–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º ‚Äî `data.person.name = 'Lil';`. –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –æ—Ç—Ä–∏–º—É—î–º–æ –ø–æ–º–∏–ª–∫—É `Uncaught TypeError: Cannot read properties of undefined`

–ó–∞–≤–¥—è–∫–∏ Proxy —î –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–∏—Ç–∏ –æ–± º—î–∫—Ç, —è–∫–æ–º—É —Ç–∞–∫–∞ –ø–æ–º–∏–ª–∫–∞ –Ω–µ –∑–∞–≥—Ä–æ–∂—É—î:

```js
function infinityObject() {
  return new Proxy(
    {},
    {
      get(target, propertyKey, receiver) {
        if (!Reflect.has(target, propertyKey)) {
          target[propertyKey] = infinityObject();
        }

        return Reflect.get(target, propertyKey, receiver);
      },
    }
  );
}

const dog = infinityObject();

dog.head.ear.size = 'small'; // –ø—Ä–∏—Å–≤–æ—î–Ω–æ –∑–Ω–∞—á–µ–Ω–Ω—è 'small'

console.log(dog.body.legs.top.right); // –≤–∏–≤–µ–¥–µ –≤ –∫–æ–Ω—Å–æ–ª—å `Proxy¬†{}`
```

–í –¥–∞–Ω–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–µ `Proxy`. –ü—Ä–∏ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—ñ –¥–æ –Ω–µ—ñ—Å–Ω—É—é—á–æ–≥–æ –ø–æ–ª—è –æ–± º—î–∫—Ç—É, —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —Ü–µ –ø–æ–ª–µ –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º, —è–∫–µ –ø–æ–≤–µ—Ä—Ç–∞—î `infinityObject()`, —Ç–æ–±—Ç–æ –∑–∞–ø—Ä–æ–∫—Å—å–æ–≤–∞–Ω–∏–π –ø–æ—Ä–æ–∂–Ω—ñ–π –æ–± º—î–∫—Ç.

## –ü—Ä–∏–º—ñ—Ç–∫–∏

### –ß–∏ —î –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–∞–ø–æ–ª—ñ—Ñ—ñ–ª–∏—Ç–∏ `Proxy`?

–ß–∞—Å—Ç–∫–æ–≤–æ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, [proxy-polyfill](https://github.com/GoogleChrome/proxy-polyfill) –≤—ñ–¥ –∫–æ–º–∞–Ω–¥–∏ Google Chrome
–≤–º—ñ—î –ø–æ–ª—Ñ—ñ–ª–∏—Ç–∏ —Ç–∞–∫—ñ –ø–∞—Å—Ç–∫–∏: `get`, `set`, `apply`, `consturctor`

### –ß–∏ –º–æ–∂–Ω–∞ –≤—ñ–¥–≤ º—è–∑–∞—Ç–∏ `Proxy` –≤—ñ–¥ –æ–± º—î–∫—Ç–∞?

–¢–∞–∫, —è–∫—â–æ –ø—Ä–æ–∫—Å—ñ —Å—Ç–≤–æ—Ä–µ–Ω–µ —á–µ—Ä–µ–∑ `Proxy.revocable()`:

```js
const target = {};
const handler = {};
const { proxy, revoke } = Proxy.revocable(target, handler);

proxy.city = 'Kyiv'; // set 'city'

revoke();

proxy.prop; // it will throw an error
```

### –Ø–∫—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `Proxy`?

- [Immer](https://github.com/immerjs/immer)
- [MobX](https://mobx.js.org/README.html)
- [Comlink](https://github.com/GoogleChromeLabs/comlink)

## –î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏

- –†–æ–∑–¥—ñ–ª –∫–Ω–∏–≥–∏ –ø–æ js –≤—ñ–¥ `2ality` [–ø—Ä–∏—Å–≤—è—á–µ–Ω–∏–π Proxy](https://exploringjs.com/deep-js/ch_proxies.html)
- `Awesome list` [–ø—Ä–æ –ø—Ä–æ–∫—Å—ñ](https://github.com/mikaelbr/awesome-es2015-proxy)
